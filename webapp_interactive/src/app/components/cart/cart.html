
<div class="cart-wrapper">
  <!-- Floating button avec badge animÃ© -->
  <button mat-fab color="primary" class="cart-toggle" (click)="toggleCart()" [@bounce]="cartItems.length > 0 ? 'active' : 'inactive'">
    ðŸ›’
    <span class="cart-badge" [class.pulse]="cartItems.length > 0">{{ cartItems.length }}</span>
  </button>

  <!-- Floating cart avec animation d'ouverture -->
  @if(isOpen) {
    <mat-card class="cart-content mat-elevation-z8" [@slideIn]>
      <mat-card-title class="cart-title">
        <mat-icon>shopping_cart</mat-icon>
        Shopping Cart
        <button mat-icon-button class="close-btn" (click)="toggleCart()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-card-title>
      <mat-divider></mat-divider>

      <!-- Ã‰tat vide du panier -->
      @if(cartItems.length === 0) {
        <div class="empty-state">
          <mat-icon>remove_shopping_cart</mat-icon>
          <p>Your cart is empty</p>
          <small>Add books to see them here</small>
        </div>
      } @else {
        <mat-list class="cart-items-list">
          @for(item of cartItems; track item.bookId) {
            <div class="cart-item" [@itemFade]>
              <div class="item-info">
                <span class="item-id">{{ item.title }}</span>
                <div class="quantity-section">
                  <div class="quantity-controls">
                    <button mat-mini-fab (click)="removeItem(item.bookId, 1)" class="qty-btn" [disabled]="item.quantity <= 0">
                      <mat-icon>remove</mat-icon>
                    </button>
                    <span style="display:inline-block; width:10px;"></span>
                    <span class="item-qty">{{ item.quantity }}</span>
                    <span style="display:inline-block; width:10px;"></span>
                    <button mat-mini-fab (click)="addItem(item.bookId, 1)" class="qty-btn" [disabled]="item.quantity >= getBookQuantity(item.bookId)">
                      <mat-icon>add</mat-icon>
                    </button>
                    <span style="display:inline-block; width:40px;"></span>
                    <button mat-mini-fab color="warn" (click)="removeItem(item.bookId, item.quantity)" class="remove-btn" matTooltip="Remove all">
                    <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
            </div>


          }
        </mat-list>

        <mat-divider></mat-divider>

        <div class="cart-footer">
          <div class="total-section">
            <span class="total-label">Total :</span>
            <span class="total-value">{{ total }} $</span>
          </div>
          <button mat-raised-button color="accent" (click)="payment()" class="payment-btn">
            <mat-icon>payment</mat-icon>
            Payment
          </button>
        </div>
      }
    </mat-card>
  }
</div>

















