<!--<div class="cart-wrapper">-->
<!--  &lt;!&ndash; Floating button &ndash;&gt;-->
<!--  <button mat-fab color="primary" class="cart-toggle" (click)="toggleCart()">-->
<!--    ðŸ›’ {{ cartItems.length }}-->
<!--  </button>-->

<!--  &lt;!&ndash; Floating cart &ndash;&gt;-->
<!--  @if(isOpen) {-->
<!--    <mat-card class="cart-content mat-elevation-z8">-->
<!--      <mat-card-title>Shopping Cart</mat-card-title>-->
<!--      <mat-divider></mat-divider>-->

<!--      <mat-list>-->
<!--        @for(item of cartItems; track item.bookId) {-->
<!--          <mat-list-item class="cart-item">-->
<!--            <div class="item-info">-->
<!--              <span class="item-id">Book ID: {{ item.bookId }}</span>-->
<!--              <span class="item-qty">Qty: {{ item.quantity }}</span>-->
<!--            </div>-->
<!--            <button mat-icon-button color="warn" (click)="removeItem(item.bookId,item.quantity)">-->
<!--              <mat-icon>close</mat-icon>-->
<!--            </button>-->
<!--          </mat-list-item>-->
<!--        }-->
<!--      </mat-list>-->

<!--      <mat-divider></mat-divider>-->

<!--      <div class="cart-footer">-->
<!--        <span>Total items: {{ total }}</span>-->
<!--        <button mat-raised-button color="accent" (click)="payment()">Payment</button>-->
<!--      </div>-->
<!--    </mat-card>-->
<!--  }-->
<!--</div>-->
<div class="cart-wrapper">
  <!-- Floating button avec badge animÃ© -->
  <button mat-fab color="primary" class="cart-toggle" (click)="toggleCart()" [@bounce]="cartItems.length > 0 ? 'active' : 'inactive'">
    ðŸ›’
    <span class="cart-badge" [class.pulse]="cartItems.length > 0">{{ cartItems.length }}</span>
  </button>

  <!-- Floating cart avec animation d'ouverture -->
  @if(isOpen) {
    <mat-card class="cart-content mat-elevation-z8" [@slideIn]>
      <mat-card-title class="cart-title">
        <mat-icon>shopping_cart</mat-icon>
        Shopping Cart
        <button mat-icon-button class="close-btn" (click)="toggleCart()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-card-title>
      <mat-divider></mat-divider>

      <!-- Ã‰tat vide du panier -->
      @if(cartItems.length === 0) {
        <div class="empty-state">
          <mat-icon>remove_shopping_cart</mat-icon>
          <p>Your cart is empty</p>
          <small>Add books to see them here</small>
        </div>
      } @else {
        <mat-list class="cart-items-list">
          @for(item of cartItems; track item.bookId) {
<!--            <mat-list-item class="cart-item" [@itemFade]>-->
<!--              <div class="item-info">-->
<!--                <span class="item-id">Book ID: {{ item.bookId }}</span>-->
<!--                <div class="quantity-controls">-->
<!--                  <button mat-icon-button (click)="removeItem(item.bookId, 1)" class="qty-btn" [disabled]="item.quantity <= 1">-->
<!--                    <mat-icon>remove</mat-icon>-->
<!--                  </button>-->
<!--                  <span class="item-qty">{{ item.quantity }}</span>-->
<!--                  <button mat-icon-button (click)="removeItem(item.bookId, -1)" class="qty-btn">-->
<!--                    <mat-icon>add</mat-icon>-->
<!--                  </button>-->
<!--                </div>-->
<!--              </div>-->
<!--              <button mat-icon-button color="warn" (click)="removeItem(item.bookId, item.quantity)" class="remove-btn" matTooltip="Remove all">-->
<!--                <mat-icon>delete</mat-icon>-->
<!--              </button>-->
<!--            </mat-list-item>-->
            <div class="cart-item" [@itemFade]>
              <div class="item-info">
                <span class="item-id">Book ID: {{ item.bookId }}</span>
                <div class="quantity-section">
                  <div class="quantity-controls">
                    <button mat-mini-fab (click)="removeItem(item.bookId, 1)" class="qty-btn" [disabled]="item.quantity <= 1">
                      <mat-icon>remove</mat-icon>
                    </button>
                    <span style="display:inline-block; width:10px;"></span> <!-- espace -->
                    <span class="item-qty">{{ item.quantity }}</span>
                    <span style="display:inline-block; width:10px;"></span> <!-- espace -->
                    <button mat-mini-fab (click)="removeItem(item.bookId, -1)" class="qty-btn">
                      <mat-icon>add</mat-icon>
                    </button>
                    <span style="display:inline-block; width:40px;"></span> <!-- espace -->
                    <button mat-mini-fab color="warn" (click)="removeItem(item.bookId, item.quantity)" class="remove-btn" matTooltip="Remove all">
                    <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
            </div>


          }
        </mat-list>

        <mat-divider></mat-divider>

        <div class="cart-footer">
          <div class="total-section">
            <span class="total-label">Total items:</span>
            <span class="total-value">{{ total }}</span>
          </div>
          <button mat-raised-button color="accent" (click)="payment()" class="payment-btn">
            <mat-icon>payment</mat-icon>
            Checkout
          </button>
        </div>
      }
    </mat-card>
  }
</div>
